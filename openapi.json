{"openapi":"3.1.0","info":{"title":"MetaSync API","description":"API for MetaSync LLM processing","version":"0.1.0"},"paths":{"/clients":{"post":{"tags":["clients"],"summary":"Create Client","description":"Create a new client.\n\nReturns the client data along with the API key (only returned once).","operationId":"create_client_clients_post","parameters":[{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["clients"],"summary":"List Clients","description":"List all clients.\n\nReturns a list of all clients (excluding API keys).","operationId":"list_clients_clients_get","parameters":[{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClientResponse"},"title":"Response List Clients Clients Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/{client_id}":{"get":{"tags":["clients"],"summary":"Get Client","description":"Get a client by ID.\n\nReturns the client data (excluding API key).","operationId":"get_client_clients__client_id__get","parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","title":"Client Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["clients"],"summary":"Update Client","description":"Update a client's name and/or enabled status.\n\nReturns the updated client data.","operationId":"update_client_clients__client_id__patch","parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","title":"Client Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["clients"],"summary":"Delete Client","description":"Delete a client (soft delete).","operationId":"delete_client_clients__client_id__delete","parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","title":"Client Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/{client_id}/toggle":{"post":{"tags":["clients"],"summary":"Toggle Client Enabled","description":"Toggle the enabled status of a client.\n\nReturns the updated client data.","operationId":"toggle_client_enabled_clients__client_id__toggle_post","parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","title":"Client Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/{client_id}/rotate-key":{"post":{"tags":["clients"],"summary":"Rotate Client Key","description":"Rotate a client's API key.\n\nGenerates a new random salt and API key, updates the hash in\nthe database. Returns the new API key once (only returned during\nthis call).","operationId":"rotate_client_key_clients__client_id__rotate_key_post","parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","title":"Client Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientRotateKeyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health/ready":{"get":{"tags":["health"],"summary":"Readiness Check","description":"Readiness check endpoint\nVerifies that the service is ready to accept traffic by checking dependencies","operationId":"readiness_check_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Readiness Check Health Ready Get"}}}}}}},"/health/live":{"get":{"tags":["health"],"summary":"Liveness Check","description":"Liveness check endpoint\nVerifies that the application is running and responsive","operationId":"liveness_check_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Liveness Check Health Live Get"}}}}}}},"/health":{"get":{"tags":["health"],"summary":"Health Check","description":"Basic health check endpoint\nReturns application status and basic service information","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Health Get"}}}}}}},"/prompts":{"post":{"tags":["prompts"],"summary":"Create Prompt","description":"Create a new prompt.\n\n- Public prompts (isPublic: true) can only be created with Admin\n  API Key\n- Private prompts (isPublic: false) can be created by any\n  authenticated client\n- Version is auto-incremented if not provided\n- Returns the created prompt data","operationId":"create_prompt_prompts_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["prompts"],"summary":"List Prompts","description":"List prompts with optional filtering.\n\nReturns both public prompts and the authenticated client's private\nprompts. Filters can be combined (AND logic).","operationId":"list_prompts_prompts_get","parameters":[{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by prompt name","title":"Name"},"description":"Filter by prompt name"},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by prompt type","title":"Type"},"description":"Filter by prompt type"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/PromptStatus"},{"type":"null"}],"description":"Filter by prompt status","title":"Status"},"description":"Filter by prompt status"},{"name":"version","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"description":"Filter by prompt version","title":"Version"},"description":"Filter by prompt version"},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromptResponse"},"title":"Response List Prompts Prompts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/prompts/{prompt_id}":{"get":{"tags":["prompts"],"summary":"Get Prompt","description":"Get a prompt by ID.\n\nReturns the prompt if it's public or belongs to the authenticated\nclient.","operationId":"get_prompt_prompts__prompt_id__get","parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["prompts"],"summary":"Update Prompt","description":"Update a prompt.\n\n- Public prompts can only be updated by admin\n- Private prompts can only be updated by the owning client\n- client_id updates are admin-only and require validation\n- Returns the updated prompt data","operationId":"update_prompt_prompts__prompt_id__patch","parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["prompts"],"summary":"Delete Prompt","description":"Delete a prompt (soft delete).\n\n- Public prompts can only be deleted by admin\n- Private prompts can only be deleted by the owning client","operationId":"delete_prompt_prompts__prompt_id__delete","parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs":{"post":{"tags":["jobs"],"summary":"Create Job","description":"Create a new job.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Validates that all prompt IDs exist in the prompts collection\n- Validates that the model exists in the models collection\n- Returns the created job data","operationId":"create_job_jobs_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["jobs"],"summary":"List Jobs","description":"List jobs with access control and optional filters.\n\n- Clients see only their own jobs\n- Admin can see all jobs\n- Requires either client authentication OR admin API key\n- Supports filtering by jobId, status, operation, model, and priority\n  via query parameters\n- Supports filtering by any clientReference field using query parameters\n  like: clientReference.runId=123\n- Supports limiting results with the limit parameter (e.g., limit=10\n  returns only 10 items)","operationId":"list_jobs_jobs_get","parameters":[{"name":"jobId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by client-provided job ID","title":"Jobid"},"description":"Filter by client-provided job ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/JobStatus"},{"type":"null"}],"description":"Filter by job status","title":"Status"},"description":"Filter by job status"},{"name":"operation","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by operation","title":"Operation"},"description":"Filter by operation"},{"name":"model","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model","title":"Model"},"description":"Filter by model"},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by priority","title":"Priority"},"description":"Filter by priority"},{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"description":"Limit the number of results returned","title":"Limit"},"description":"Limit the number of results returned"},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/JobResponse"},"title":"Response List Jobs Jobs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs/batch":{"post":{"tags":["jobs"],"summary":"Create Jobs Batch","description":"Create multiple jobs at once.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Validates that all prompt IDs exist in the prompts collection\n  for each job\n- Validates that all models exist in the models collection for\n  each job\n- Returns a list of created job data\n- If any job fails validation, the entire batch fails\n  (all-or-nothing)","operationId":"create_jobs_batch_jobs_batch_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobBatchCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/JobResponse"},"title":"Response Create Jobs Batch Jobs Batch Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["jobs"],"summary":"Update Jobs Batch","description":"Update multiple jobs at once.\n\n- Clients can only update their own jobs\n- Admin can update any job\n- Requires either client authentication OR admin API key\n- Validates all jobs before updating (all-or-nothing)\n- Returns a list of updated job data","operationId":"update_jobs_batch_jobs_batch_patch","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobBatchUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/JobResponse"},"title":"Response Update Jobs Batch Jobs Batch Patch"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["jobs"],"summary":"Delete Jobs Batch","description":"Delete multiple jobs at once (soft delete).\n\n- Clients can only delete their own jobs\n- Admin can delete any job\n- Requires either client authentication OR admin API key\n- Validates all jobs before deleting (all-or-nothing)","operationId":"delete_jobs_batch_jobs_batch_delete","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobBatchDeleteRequest"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs/summary":{"get":{"tags":["jobs"],"summary":"Get Jobs Summary","description":"Get summary of jobs with counts by status.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Returns counts for each status (PENDING, PROCESSING, PROCESSED,\n  CONSUMED, ERROR_PROCESSING, ERROR_CONSUMING, CANCELED)\n- Supports filtering by operation, model, id, and any\n  clientReference field\n- For clientReference filtering, use query parameters like:\n  clientReference.randomProp=hello\n- Clients can only see their own jobs","operationId":"get_jobs_summary_jobs_summary_get","parameters":[{"name":"operation","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by operation","title":"Operation"},"description":"Filter by operation"},{"name":"model","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model","title":"Model"},"description":"Filter by model"},{"name":"id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by client-provided job ID","title":"Id"},"description":"Filter by client-provided job ID"},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs/{job_id}":{"get":{"tags":["jobs"],"summary":"Get Job","description":"Get a job by ID.\n\n- Clients can only access their own jobs\n- Admin can access any job\n- Requires either client authentication OR admin API key","operationId":"get_job_jobs__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["jobs"],"summary":"Update Job Status","description":"Update job status (clients only).\n\n- Clients can only update status field\n- Allowed transitions: PENDINGâ†’CANCELED, PROCESSEDâ†’CONSUMED,\n  PROCESSEDâ†’ERROR_CONSUMING\n- Invalid transitions return 400 Bad Request\n- Clients can only update their own jobs","operationId":"update_job_status_jobs__job_id__patch","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobStatusUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["jobs"],"summary":"Delete Job","description":"Delete a job (soft delete).\n\n- Clients can only delete their own jobs\n- Admin can delete any job\n- Requires either client authentication OR admin API key","operationId":"delete_job_jobs__job_id__delete","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs/{job_id}/full":{"patch":{"tags":["jobs"],"summary":"Update Job Full","description":"Full update of a job (workers/admin only).\n\n- Allows updating all fields\n- Used by workers to update status to PROCESSING, PROCESSED, etc.\n- Requires admin API key or client authentication (for their own\n  jobs)\n- Not documented for regular clients","operationId":"update_job_full_jobs__job_id__full_patch","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/workers":{"post":{"tags":["workers"],"summary":"Create Worker","description":"Create a new worker.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Worker is created in stopped state\n- Optionally assign to a group for batch operations\n- Returns the created worker data","operationId":"create_worker_workers_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["workers"],"summary":"List Workers","description":"List all workers for the authenticated client.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Clients can only see their own workers","operationId":"list_workers_workers_get","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WorkerResponse"},"title":"Response List Workers Workers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/workers/batch":{"post":{"tags":["workers"],"summary":"Create Workers Batch","description":"Create multiple workers in batch.\n\n- Requires client authentication (client_id and client_api_key headers)\n- Workers are created in stopped state\n- Workers are named {workerIdPrefix}-1, {workerIdPrefix}-2, etc.\n- Optionally assign all workers to a group for batch operations\n- Returns list of created workers and any failures","operationId":"create_workers_batch_workers_batch_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerBatchCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerBatchCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["workers"],"summary":"Update Workers Batch","description":"Batch update workers (start/stop).\n\n- Requires client authentication (client_id and client_api_key headers)\n- Specify workers by workerIds array OR by group name\n- Actions: \"start\" or \"stop\"\n- Returns list of updated workers and any failures","operationId":"update_workers_batch_workers_batch_patch","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerBatchUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerBatchUpdateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/workers/summary":{"get":{"tags":["workers"],"summary":"Get Workers Summary","description":"Get summary of workers with counts and IDs by status.\n\n- Supports both client and admin authentication\n- Clients can only see their own workers\n- Admins can see all workers\n- Returns counts for each status (running, stopped, error)\n- Returns lists of worker IDs for each status\n- Supports filtering by modelFilter, operationFilter, and any\n  config.clientReferenceFilters field\n- For clientReferenceFilters filtering, use query parameters like:\n  clientReference.randomProp=hello","operationId":"get_workers_summary_workers_summary_get","parameters":[{"name":"modelFilter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by config.modelFilter","title":"Modelfilter"},"description":"Filter by config.modelFilter"},{"name":"operationFilter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by config.operationFilter","title":"Operationfilter"},"description":"Filter by config.operationFilter"},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/workers/{worker_id}":{"get":{"tags":["workers"],"summary":"Get Worker","description":"Get a worker by ID.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Clients can only access their own workers","operationId":"get_worker_workers__worker_id__get","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["workers"],"summary":"Update Worker","description":"Update worker configuration.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Worker must be stopped before updating configuration\n- Clients can only update their own workers","operationId":"update_worker_workers__worker_id__patch","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["workers"],"summary":"Delete Worker","description":"Delete a worker.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Worker must be stopped before deletion\n- Clients can only delete their own workers","operationId":"delete_worker_workers__worker_id__delete","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/workers/{worker_id}/start":{"post":{"tags":["workers"],"summary":"Start Worker","description":"Start a worker.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Worker must be in stopped state\n- Clients can only start their own workers","operationId":"start_worker_workers__worker_id__start_post","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/workers/{worker_id}/stop":{"post":{"tags":["workers"],"summary":"Stop Worker","description":"Stop a worker.\n\n- Requires client authentication (client_id and client_api_key\n  headers)\n- Worker must be in running state\n- Clients can only stop their own workers","operationId":"stop_worker_workers__worker_id__stop_post","parameters":[{"name":"worker_id","in":"path","required":true,"schema":{"type":"string","title":"Worker Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/prompt-flows":{"post":{"tags":["prompt-flows"],"summary":"Create Prompt Flow","description":"Create a new prompt flow.\n\n- Public flows (isPublic: true) can only be created with Admin\n  API Key\n- Private flows (isPublic: false) can be created by any\n  authenticated client\n- Returns the created prompt flow data","operationId":"create_prompt_flow_prompt_flows_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptFlowCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptFlowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["prompt-flows"],"summary":"List Prompt Flows","description":"List prompt flows with access control.\n\n- Clients see their own private flows and all public flows\n- Admin can see all flows\n- Requires either client authentication OR admin API key","operationId":"list_prompt_flows_prompt_flows_get","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromptFlowResponse"},"title":"Response List Prompt Flows Prompt Flows Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/prompt-flows/{flow_id}":{"get":{"tags":["prompt-flows"],"summary":"Get Prompt Flow","description":"Get a prompt flow by ID.\n\n- Clients can access their own private flows and all public flows\n- Admin can access any flow\n- Requires either client authentication OR admin API key","operationId":"get_prompt_flow_prompt_flows__flow_id__get","parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","title":"Flow Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptFlowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["prompt-flows"],"summary":"Update Prompt Flow","description":"Update a prompt flow.\n\n- Public flows can only be updated by admin\n- Private flows can only be updated by the owning client\n- Returns the updated prompt flow data","operationId":"update_prompt_flow_prompt_flows__flow_id__patch","parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","title":"Flow Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptFlowUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PromptFlowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["prompt-flows"],"summary":"Delete Prompt Flow","description":"Delete a prompt flow (soft delete).\n\n- Public flows can only be deleted by admin\n- Private flows can only be deleted by the owning client","operationId":"delete_prompt_flow_prompt_flows__flow_id__delete","parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","title":"Flow Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models":{"post":{"tags":["models"],"summary":"Create Model","description":"Create a new model.\n\nReturns the model data along with the key (only returned once).","operationId":"create_model_models_post","parameters":[{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["models"],"summary":"List Models","description":"List all models.\n\nReturns a list of all models (excluding keys).\nRequires either client authentication (client_id and client_api_key headers) \nor admin API key.","operationId":"list_models_models_get","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ModelResponse"},"title":"Response List Models Models Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/models/{model_id}":{"get":{"tags":["models"],"summary":"Get Model","description":"Get a model by ID.\n\nReturns the model data (excluding key).","operationId":"get_model_models__model_id__get","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["models"],"summary":"Update Model","description":"Update a model's fields.\n\nReturns the updated model data.","operationId":"update_model_models__model_id__patch","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["models"],"summary":"Delete Model","description":"Delete a model (soft delete).","operationId":"delete_model_models__model_id__delete","parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/stream":{"get":{"tags":["stream"],"summary":"List Streams","description":"List streams with optional filters.\n\n- Requires client authentication (client_id and client_api_key headers)\n- Returns only streams belonging to the authenticated client\n- Supports filtering by model and status via query parameters\n- Supports limiting results with the limit parameter (e.g., limit=10 returns only 10 items)","operationId":"list_streams_stream_get","parameters":[{"name":"model","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model","title":"Model"},"description":"Filter by model"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (streaming, completed, error)","title":"Status"},"description":"Filter by status (streaming, completed, error)"},{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"description":"Limit the number of results returned","title":"Limit"},"description":"Limit the number of results returned"},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StreamResponse"},"title":"Response List Streams Stream Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["stream"],"summary":"Stream Completion","description":"Stream LLM completion in real-time.\n\n- Requires client authentication (client_id and client_api_key headers)\n- Validates model exists and additional prompt IDs if provided\n- Streams response chunks as they arrive from the LLM\n- Saves stream record to database with request/response data","operationId":"stream_completion_stream_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/stream/summary":{"get":{"tags":["stream"],"summary":"Get Streams Summary","description":"Get summary of streams with counts by status.\n\n- Requires client authentication (client_id and client_api_key headers)\n- Returns counts for each status (streaming, completed, error)\n- Supports filtering by model and status\n- Clients can only see their own streams","operationId":"get_streams_summary_stream_summary_get","parameters":[{"name":"model","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by model","title":"Model"},"description":"Filter by model"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (streaming, completed, error)","title":"Status"},"description":"Filter by status (streaming, completed, error)"},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/stream/{stream_id}":{"get":{"tags":["stream"],"summary":"Get Stream","description":"Get a stream by ID.\n\n- Requires client authentication (client_id and client_api_key headers)\n- Clients can only access their own streams","operationId":"get_stream_stream__stream_id__get","parameters":[{"name":"stream_id","in":"path","required":true,"schema":{"type":"string","title":"Stream Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs":{"post":{"tags":["runs"],"summary":"Create Run","description":"Create a new optimization run.\n\n- Requires client authentication (client_id and client_api_key headers)\n- Validates all prompt IDs and model names exist\n- Creates the run and seeds the first job\n- Run starts in PENDING status and transitions to RUNNING","operationId":"create_run_runs_post","parameters":[{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["runs"],"summary":"List Runs","description":"List runs with access control.\n\n- Clients see only their own runs\n- Admin can see all runs\n- Requires either client authentication OR admin API key\n- Optional status filter","operationId":"list_runs_runs_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RunStatus"},{"type":"null"}],"title":"Status"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RunResponse"},"title":"Response List Runs Runs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}":{"get":{"tags":["runs"],"summary":"Get Run","description":"Get a run by ID.\n\n- Clients can only access their own runs\n- Admin can access any run\n- Requires either client authentication OR admin API key","operationId":"get_run_runs__run_id__get","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["runs"],"summary":"Delete Run","description":"Delete a run (soft delete).\n\n- Clients can only delete their own runs\n- Admin can delete any run\n- Requires either client authentication OR admin API key","operationId":"delete_run_runs__run_id__delete","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}/pause":{"patch":{"tags":["runs"],"summary":"Pause Run","description":"Pause a running run.\n\n- Pauses the run (prevents new jobs from being created)\n- Only works if run status is RUNNING\n- Clients can only pause their own runs\n- Admin can pause any run","operationId":"pause_run_runs__run_id__pause_patch","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}/resume":{"patch":{"tags":["runs"],"summary":"Resume Run","description":"Resume a paused run.\n\n- Resumes the run (allows new jobs to be created)\n- Only works if run status is PAUSED\n- Clients can only resume their own runs\n- Admin can resume any run","operationId":"resume_run_runs__run_id__resume_patch","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/runs/{run_id}/cancel":{"patch":{"tags":["runs"],"summary":"Cancel Run","description":"Cancel a run.\n\n- Cancels the run (stops all future jobs)\n- Only works if run is not already COMPLETED, FAILED, or CANCELLED\n- Clients can only cancel their own runs\n- Admin can cancel any run","operationId":"cancel_run_runs__run_id__cancel_patch","parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"client-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"}},{"name":"client-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Api Key"}},{"name":"admin-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Admin Api Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/docs":{"get":{"summary":"Protected Docs","description":"Protected Swagger UI documentation.","operationId":"protected_docs_docs_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBasic":[]}]}},"/redoc":{"get":{"summary":"Protected Redoc","description":"Protected ReDoc documentation.","operationId":"protected_redoc_redoc_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBasic":[]}]}},"/openapi.json":{"get":{"summary":"Protected Openapi","description":"Protected OpenAPI schema.","operationId":"protected_openapi_openapi_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBasic":[]}]}}},"components":{"schemas":{"BatchAction":{"type":"string","enum":["start","stop"],"title":"BatchAction","description":"Actions that can be performed on workers in batch"},"ClientCreateRequest":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Client name"}},"type":"object","required":["name"],"title":"ClientCreateRequest","description":"Request model for creating a new client"},"ClientCreateResponse":{"properties":{"clientId":{"type":"string","title":"Clientid","description":"Unique client identifier"},"name":{"type":"string","title":"Name","description":"Client name"},"enabled":{"type":"boolean","title":"Enabled","description":"Whether client is enabled"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"},"api_key":{"type":"string","title":"Api Key","description":"API key (only returned once during creation)"}},"type":"object","required":["clientId","name","enabled","_metadata","api_key"],"title":"ClientCreateResponse","description":"Response model for client creation (includes API key once)","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","updatedAt":"2024-01-01T00:00:00"},"api_key":"a1b2c3d4e5f6...","clientId":"123e4567-e89b-12d3-a456-426614174000","enabled":true,"name":"Example Client"}},"ClientResponse":{"properties":{"clientId":{"type":"string","title":"Clientid","description":"Unique client identifier"},"name":{"type":"string","title":"Name","description":"Client name"},"enabled":{"type":"boolean","title":"Enabled","description":"Whether client is enabled"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["clientId","name","enabled","_metadata"],"title":"ClientResponse","description":"Response model for client data (without API key)","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","updatedAt":"2024-01-01T00:00:00"},"clientId":"123e4567-e89b-12d3-a456-426614174000","enabled":true,"name":"Example Client"}},"ClientRotateKeyResponse":{"properties":{"clientId":{"type":"string","title":"Clientid","description":"Unique client identifier"},"api_key":{"type":"string","title":"Api Key","description":"New API key (only returned once during rotation)"}},"type":"object","required":["clientId","api_key"],"title":"ClientRotateKeyResponse","description":"Response model for key rotation (includes new API key once)","example":{"api_key":"a1b2c3d4e5f6...","clientId":"123e4567-e89b-12d3-a456-426614174000"}},"ClientUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"Client name"},"enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enabled","description":"Enable/disable client"}},"type":"object","title":"ClientUpdateRequest","description":"Request model for updating a client"},"CostModel":{"properties":{"tokens":{"type":"integer","exclusiveMinimum":0.0,"title":"Tokens","description":"Number of tokens for cost calculation"},"currency":{"type":"string","minLength":1,"title":"Currency","description":"Currency code (e.g., USD)"},"input":{"type":"number","minimum":0.0,"title":"Input","description":"Cost per input token"},"output":{"type":"number","minimum":0.0,"title":"Output","description":"Cost per output token"}},"type":"object","required":["tokens","currency","input","output"],"title":"CostModel","description":"Cost structure for model pricing"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IterationResult":{"properties":{"iteration":{"type":"integer","title":"Iteration","description":"Iteration number (0-indexed)"},"jobId":{"type":"string","title":"Jobid","description":"Job ID for this iteration"},"workingPromptId":{"type":"string","title":"Workingpromptid","description":"Working prompt ID used"},"status":{"type":"string","title":"Status","description":"Job status"},"evalResult":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Evalresult","description":"Evaluation result if available"},"suggestedPromptId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestedpromptid","description":"Suggested prompt ID from meta step if available"},"processingMetrics":{"anyOf":[{"$ref":"#/components/schemas/ProcessingMetrics"},{"type":"null"}],"description":"Processing metrics for this iteration"}},"type":"object","required":["iteration","jobId","workingPromptId","status"],"title":"IterationResult","description":"Result from a single iteration","example":{"evalResult":{"feedback":"Good translation","score":8.5},"iteration":0,"jobId":"507f1f77bcf86cd799439011","processingMetrics":{"currency":"USD","duration":3.5,"inputCost":0.015,"inputTokens":1500,"outputCost":0.025,"outputTokens":500,"totalCost":0.04,"totalTokens":2000},"status":"PROCESSED","suggestedPromptId":"507f1f77bcf86cd799439013","workingPromptId":"507f1f77bcf86cd799439012"}},"JobBatchCreateRequest":{"properties":{"jobs":{"items":{"$ref":"#/components/schemas/JobCreateRequest"},"type":"array","minItems":1,"title":"Jobs","description":"List of jobs to create"}},"type":"object","required":["jobs"],"title":"JobBatchCreateRequest","description":"Request model for creating multiple jobs at once"},"JobBatchDeleteRequest":{"properties":{"jobIds":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Jobids","description":"List of job IDs to delete"}},"type":"object","required":["jobIds"],"title":"JobBatchDeleteRequest","description":"Request model for deleting multiple jobs at once"},"JobBatchUpdateItem":{"properties":{"jobId":{"type":"string","title":"Jobid","description":"Job ID to update"},"status":{"anyOf":[{"$ref":"#/components/schemas/JobStatus"},{"type":"null"}],"description":"New job status"},"operation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Operation","description":"Operation type"},"prompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Prompts","description":"(Deprecated: use workingPrompts) List of prompt IDs"},"workingPrompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Workingprompts","description":"List of working prompt IDs"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model","description":"Model name"},"temperature":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Temperature","description":"Temperature between 0 and 1"},"priority":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Priority","description":"Priority between 1 and 1000"},"requestData":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Requestdata","description":"Free JSON object to be sent to LLM"},"clientReference":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Clientreference","description":"Free JSON object for client reference"},"evalPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalprompt","description":"Prompt ID for evaluation step"},"evalModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalmodel","description":"Model name for evaluation step"},"metaPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metaprompt","description":"Prompt ID for meta-prompting step"},"metaModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metamodel","description":"Model name for meta-prompting step"},"evalResult":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Evalresult","description":"Evaluation result from eval step"},"suggestedPromptId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestedpromptid","description":"Generated prompt ID from meta step"}},"type":"object","required":["jobId"],"title":"JobBatchUpdateItem","description":"Single job update item for batch operations"},"JobBatchUpdateRequest":{"properties":{"jobs":{"items":{"$ref":"#/components/schemas/JobBatchUpdateItem"},"type":"array","minItems":1,"title":"Jobs","description":"List of jobs to update"}},"type":"object","required":["jobs"],"title":"JobBatchUpdateRequest","description":"Request model for updating multiple jobs at once"},"JobCreateRequest":{"properties":{"operation":{"type":"string","minLength":1,"title":"Operation","description":"Operation type"},"prompts":{"anyOf":[{"items":{"type":"string"},"type":"array","minItems":1},{"type":"null"}],"title":"Prompts","description":"(Deprecated: use workingPrompts) List of prompt IDs"},"workingPrompts":{"anyOf":[{"items":{"type":"string"},"type":"array","minItems":1},{"type":"null"}],"title":"Workingprompts","description":"List of working prompt IDs"},"model":{"type":"string","minLength":1,"title":"Model","description":"Model name from models collection"},"temperature":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Temperature","description":"Temperature between 0 and 1"},"priority":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Priority","description":"Priority between 1 and 1000"},"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Optional client-provided job ID"},"requestData":{"additionalProperties":true,"type":"object","title":"Requestdata","description":"Free JSON object to be sent to LLM with prompt (most important field)"},"clientReference":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Clientreference","description":"Free JSON object for client reference"},"evalPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalprompt","description":"Prompt ID for evaluation step"},"evalModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalmodel","description":"Model name for evaluation step"},"metaPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metaprompt","description":"Prompt ID for meta-prompting step"},"metaModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metamodel","description":"Model name for meta-prompting step"}},"type":"object","required":["operation","model","temperature","priority","requestData"],"title":"JobCreateRequest","description":"Request model for creating a new job"},"JobResponse":{"properties":{"jobId":{"type":"string","title":"Jobid","description":"Unique job identifier (MongoDB _id)"},"clientId":{"type":"string","title":"Clientid","description":"Client ID that owns the job"},"status":{"$ref":"#/components/schemas/JobStatus","description":"Job status"},"operation":{"type":"string","title":"Operation","description":"Operation type"},"prompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Prompts","description":"(Deprecated: use workingPrompts) List of prompt IDs"},"workingPrompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Workingprompts","description":"List of working prompt IDs"},"model":{"type":"string","title":"Model","description":"Model name for working step"},"temperature":{"type":"number","title":"Temperature","description":"Temperature"},"priority":{"type":"integer","title":"Priority","description":"Priority"},"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Client-provided job ID"},"requestData":{"additionalProperties":true,"type":"object","title":"Requestdata","description":"Data to be sent to LLM"},"responseData":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Responsedata","description":"Response data from LLM processing (only present after processing)"},"processingMetrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Processingmetrics","description":"Processing metrics including tokens, duration, and costs (only present after processing)"},"clientReference":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Clientreference","description":"Client reference data"},"evalPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalprompt","description":"Prompt ID for evaluation step"},"evalModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalmodel","description":"Model name for evaluation step"},"metaPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metaprompt","description":"Prompt ID for meta-prompting step"},"metaModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metamodel","description":"Model name for meta-prompting step"},"evalResult":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Evalresult","description":"Evaluation result from eval step (only present after eval processing)"},"suggestedPromptId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestedpromptid","description":"Generated prompt ID from meta step (only present after meta processing)"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["jobId","clientId","status","operation","model","temperature","priority","requestData","_metadata"],"title":"JobResponse","description":"Response model for job data","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","isDeleted":false,"updatedAt":"2024-01-01T00:00:00"},"clientId":"123e4567-e89b-12d3-a456-426614174000","clientReference":{"ref":"abc123"},"id":"client-job-123","jobId":"507f1f77bcf86cd799439011","model":"gpt-4","operation":"process","priority":100,"prompts":["507f1f77bcf86cd799439012"],"requestData":{"input":"Hello world"},"status":"PENDING","temperature":0.7}},"JobStatus":{"type":"string","enum":["PENDING","PROCESSING","PROCESSED","CONSUMED","ERROR_PROCESSING","ERROR_CONSUMING","CANCELED"],"title":"JobStatus","description":"Status enum for jobs"},"JobStatusUpdateRequest":{"properties":{"status":{"$ref":"#/components/schemas/JobStatus","description":"New job status"}},"type":"object","required":["status"],"title":"JobStatusUpdateRequest","description":"Request model for client status updates only (restricted to status field)"},"JobSummaryResponse":{"properties":{"PENDING":{"type":"integer","title":"Pending","description":"Count of jobs with PENDING status","default":0},"PROCESSING":{"type":"integer","title":"Processing","description":"Count of jobs with PROCESSING status","default":0},"PROCESSED":{"type":"integer","title":"Processed","description":"Count of jobs with PROCESSED status","default":0},"CONSUMED":{"type":"integer","title":"Consumed","description":"Count of jobs with CONSUMED status","default":0},"ERROR_PROCESSING":{"type":"integer","title":"Error Processing","description":"Count of jobs with ERROR_PROCESSING status","default":0},"ERROR_CONSUMING":{"type":"integer","title":"Error Consuming","description":"Count of jobs with ERROR_CONSUMING status","default":0},"CANCELED":{"type":"integer","title":"Canceled","description":"Count of jobs with CANCELED status","default":0},"total":{"type":"integer","title":"Total","description":"Total count of jobs matching filters","default":0},"processingMetrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Processingmetrics","description":"Aggregated processing metrics from PROCESSED and CONSUMED jobs. Includes inputTokens, outputTokens, totalTokens, duration, and optionally inputCost, outputCost, totalCost, currency (only if all currencies match)"}},"type":"object","title":"JobSummaryResponse","description":"Response model for job summary with counts by status","example":{"CANCELED":0,"CONSUMED":3,"ERROR_CONSUMING":0,"ERROR_PROCESSING":1,"PENDING":5,"PROCESSED":10,"PROCESSING":2,"processingMetrics":{"currency":"USD","duration":45.5,"inputCost":0.015,"inputTokens":1500,"outputCost":0.008,"outputTokens":800,"totalCost":0.023,"totalTokens":2300},"total":21}},"JobUpdateRequest":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/JobStatus"},{"type":"null"}],"description":"Job status"},"operation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Operation","description":"Operation type"},"prompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Prompts","description":"(Deprecated: use workingPrompts) List of prompt IDs"},"workingPrompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Workingprompts","description":"List of working prompt IDs"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model","description":"Model name"},"temperature":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Temperature","description":"Temperature between 0 and 1"},"priority":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Priority","description":"Priority between 1 and 1000"},"requestData":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Requestdata","description":"Free JSON object to be sent to LLM"},"clientReference":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Clientreference","description":"Free JSON object for client reference"},"evalPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalprompt","description":"Prompt ID for evaluation step"},"evalModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evalmodel","description":"Model name for evaluation step"},"metaPrompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metaprompt","description":"Prompt ID for meta-prompting step"},"metaModel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metamodel","description":"Model name for meta-prompting step"},"evalResult":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Evalresult","description":"Evaluation result from eval step"},"suggestedPromptId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggestedpromptid","description":"Generated prompt ID from meta step"}},"type":"object","title":"JobUpdateRequest","description":"Request model for full job updates (workers/admin only)"},"ModelCreateRequest":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Model name"},"sdk":{"type":"string","title":"Sdk","description":"SDK type (ChatCompletionsClient, AzureOpenAI, or Anthropic)"},"endpoint":{"type":"string","minLength":1,"title":"Endpoint","description":"API endpoint URL"},"apiType":{"type":"string","minLength":1,"title":"Apitype","description":"API type"},"apiVersion":{"type":"string","minLength":1,"title":"Apiversion","description":"API version"},"deployment":{"type":"string","minLength":1,"title":"Deployment","description":"Deployment name"},"service":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Service","description":"Service name for local keyring lookup only (optional). Used to determine which keyring service to query when loading API keys from the local keychain. Not used for actual LLM API calls."},"key":{"type":"string","minLength":1,"title":"Key","description":"API key identifier"},"maxToken":{"type":"integer","exclusiveMinimum":0.0,"title":"Maxtoken","description":"Maximum tokens"},"maxCompletionToken":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Maxcompletiontoken","description":"Maximum completion tokens (use instead of maxToken for models requiring max_completion_tokens)"},"minTemperature":{"type":"number","maximum":2.0,"minimum":0.0,"title":"Mintemperature","description":"Minimum temperature"},"maxTemperature":{"type":"number","maximum":2.0,"minimum":0.0,"title":"Maxtemperature","description":"Maximum temperature"},"cost":{"$ref":"#/components/schemas/CostModel","description":"Cost structure"}},"type":"object","required":["name","sdk","endpoint","apiType","apiVersion","deployment","key","maxToken","minTemperature","maxTemperature","cost"],"title":"ModelCreateRequest","description":"Request model for creating a new model"},"ModelCreateResponse":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"MongoDB document ID"},"name":{"type":"string","title":"Name","description":"Model name"},"sdk":{"type":"string","title":"Sdk","description":"SDK type"},"endpoint":{"type":"string","title":"Endpoint","description":"API endpoint URL"},"apiType":{"type":"string","title":"Apitype","description":"API type"},"apiVersion":{"type":"string","title":"Apiversion","description":"API version"},"deployment":{"type":"string","title":"Deployment","description":"Deployment name"},"service":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service","description":"Service name for local keyring lookup only (optional). Used to determine which keyring service to query when loading API keys from the local keychain. Not used for actual LLM API calls."},"key":{"type":"string","title":"Key","description":"API key identifier (only returned once during creation)"},"maxToken":{"type":"integer","title":"Maxtoken","description":"Maximum tokens"},"maxCompletionToken":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Maxcompletiontoken","description":"Maximum completion tokens (for models requiring max_completion_tokens)"},"minTemperature":{"type":"number","title":"Mintemperature","description":"Minimum temperature"},"maxTemperature":{"type":"number","title":"Maxtemperature","description":"Maximum temperature"},"cost":{"$ref":"#/components/schemas/CostModel","description":"Cost structure"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["model_id","name","sdk","endpoint","apiType","apiVersion","deployment","key","maxToken","minTemperature","maxTemperature","cost","_metadata"],"title":"ModelCreateResponse","description":"Response model for model creation (includes key once)","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","isDeleted":false},"apiType":"foundry","apiVersion":"2024-05-01-preview","cost":{"currency":"USD","input":0.0002,"output":0.0004,"tokens":1000},"deployment":"mistral-medium-2505","endpoint":"https://myendpoint.com","key":"KEY-MISTRAL-MEDIUM-2505","maxTemperature":1,"maxToken":100000,"minTemperature":0,"modelId":"68d39fe8aac434df5f140c57","name":"mistral-medium-2505","sdk":"ChatCompletionsClient","service":"azure-ai"}},"ModelResponse":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"MongoDB document ID"},"name":{"type":"string","title":"Name","description":"Model name"},"sdk":{"type":"string","title":"Sdk","description":"SDK type"},"endpoint":{"type":"string","title":"Endpoint","description":"API endpoint URL"},"apiType":{"type":"string","title":"Apitype","description":"API type"},"apiVersion":{"type":"string","title":"Apiversion","description":"API version"},"deployment":{"type":"string","title":"Deployment","description":"Deployment name"},"service":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service","description":"Service name for local keyring lookup only (optional). Used to determine which keyring service to query when loading API keys from the local keychain. Not used for actual LLM API calls."},"maxToken":{"type":"integer","title":"Maxtoken","description":"Maximum tokens"},"maxCompletionToken":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Maxcompletiontoken","description":"Maximum completion tokens (for models requiring max_completion_tokens)"},"minTemperature":{"type":"number","title":"Mintemperature","description":"Minimum temperature"},"maxTemperature":{"type":"number","title":"Maxtemperature","description":"Maximum temperature"},"cost":{"$ref":"#/components/schemas/CostModel","description":"Cost structure"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["model_id","name","sdk","endpoint","apiType","apiVersion","deployment","maxToken","minTemperature","maxTemperature","cost","_metadata"],"title":"ModelResponse","description":"Response model for model data (without API key)","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","isDeleted":false,"updatedAt":"2024-01-01T00:00:00"},"apiType":"foundry","apiVersion":"2024-05-01-preview","cost":{"currency":"USD","input":0.0002,"output":0.0004,"tokens":1000},"deployment":"mistral-medium-2505","endpoint":"https://myendpoint.com","maxTemperature":1,"maxToken":100000,"minTemperature":0,"modelId":"68d39fe8aac434df5f140c57","name":"mistral-medium-2505","sdk":"ChatCompletionsClient","service":"azure-ai"}},"ModelRun":{"properties":{"model":{"type":"string","title":"Model","description":"Model name"},"iterations":{"items":{"$ref":"#/components/schemas/IterationResult"},"type":"array","title":"Iterations","description":"List of iteration results"},"processingMetrics":{"anyOf":[{"$ref":"#/components/schemas/ProcessingMetrics"},{"type":"null"}],"description":"Aggregated processing metrics for this model"}},"type":"object","required":["model"],"title":"ModelRun","description":"Results from running all iterations with a specific model","example":{"iterations":[{"evalResult":{"score":8.5},"iteration":0,"jobId":"507f1f77bcf86cd799439011","status":"PROCESSED","suggestedPromptId":"507f1f77bcf86cd799439013","workingPromptId":"507f1f77bcf86cd799439012"}],"model":"gpt-4o","processingMetrics":{"currency":"USD","duration":7.0,"inputCost":0.03,"inputTokens":3000,"outputCost":0.05,"outputTokens":1000,"totalCost":0.08,"totalTokens":4000}}},"ModelUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"Model name"},"sdk":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sdk","description":"SDK type (ChatCompletionsClient, AzureOpenAI, or Anthropic)"},"endpoint":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Endpoint","description":"API endpoint URL"},"apiType":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Apitype","description":"API type"},"apiVersion":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Apiversion","description":"API version"},"deployment":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Deployment","description":"Deployment name"},"service":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Service","description":"Service name for local keyring lookup only (optional). Used to determine which keyring service to query when loading API keys from the local keychain. Not used for actual LLM API calls."},"key":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Key","description":"API key identifier"},"maxToken":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Maxtoken","description":"Maximum tokens"},"maxCompletionToken":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Maxcompletiontoken","description":"Maximum completion tokens (use instead of maxToken for models requiring max_completion_tokens)"},"minTemperature":{"anyOf":[{"type":"number","maximum":2.0,"minimum":0.0},{"type":"null"}],"title":"Mintemperature","description":"Minimum temperature"},"maxTemperature":{"anyOf":[{"type":"number","maximum":2.0,"minimum":0.0},{"type":"null"}],"title":"Maxtemperature","description":"Maximum temperature"},"cost":{"anyOf":[{"$ref":"#/components/schemas/CostModel"},{"type":"null"}],"description":"Cost structure"}},"type":"object","title":"ModelUpdateRequest","description":"Request model for updating a model"},"ProcessingMetrics":{"properties":{"inputTokens":{"type":"integer","title":"Inputtokens","description":"Total input tokens","default":0},"outputTokens":{"type":"integer","title":"Outputtokens","description":"Total output tokens","default":0},"totalTokens":{"type":"integer","title":"Totaltokens","description":"Total tokens (input + output)","default":0},"duration":{"type":"number","title":"Duration","description":"Processing duration in seconds","default":0.0},"inputCost":{"type":"number","title":"Inputcost","description":"Input cost","default":0.0},"outputCost":{"type":"number","title":"Outputcost","description":"Output cost","default":0.0},"totalCost":{"type":"number","title":"Totalcost","description":"Total cost (input + output)","default":0.0},"currency":{"type":"string","title":"Currency","description":"Currency code","default":"USD"}},"type":"object","title":"ProcessingMetrics","description":"Processing metrics for token usage and costs","example":{"currency":"USD","duration":3.5,"inputCost":0.015,"inputTokens":1500,"outputCost":0.025,"outputTokens":500,"totalCost":0.04,"totalTokens":2000}},"PromptCreateRequest":{"properties":{"name":{"type":"string","minLength":1,"title":"Name","description":"Prompt name"},"version":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"title":"Version","description":"Prompt version (optional, auto-incremented if not provided)"},"type":{"type":"string","minLength":1,"title":"Type","description":"Prompt type"},"status":{"$ref":"#/components/schemas/PromptStatus","description":"Prompt status"},"prompt":{"type":"string","minLength":1,"title":"Prompt","description":"The actual prompt text"},"isPublic":{"type":"boolean","title":"Ispublic","description":"Whether the prompt is public (requires admin API key)"}},"type":"object","required":["name","type","status","prompt","isPublic"],"title":"PromptCreateRequest","description":"Request model for creating a new prompt"},"PromptFlowCreateRequest":{"properties":{"name":{"type":"string","minLength":1,"title":"Name","description":"Prompt flow name"},"promptIds":{"items":{"type":"string"},"type":"array","minItems":0,"title":"Promptids","description":"Array of prompt IDs"},"isPublic":{"type":"boolean","title":"Ispublic","description":"Whether the prompt flow is public (requires admin API key)","default":false}},"type":"object","required":["name","promptIds"],"title":"PromptFlowCreateRequest","description":"Request model for creating a new prompt flow"},"PromptFlowResponse":{"properties":{"flowId":{"type":"string","title":"Flowid","description":"Unique prompt flow identifier (MongoDB _id)"},"name":{"type":"string","title":"Name","description":"Prompt flow name"},"promptIds":{"items":{"type":"string"},"type":"array","title":"Promptids","description":"Array of prompt IDs"},"clientId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Clientid","description":"Client ID (None for public flows)"},"isPublic":{"type":"boolean","title":"Ispublic","description":"Whether the prompt flow is public"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["flowId","name","promptIds","isPublic","_metadata"],"title":"PromptFlowResponse","description":"Response model for prompt flow data","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","updatedAt":"2024-01-01T00:00:00"},"clientId":"123e4567-e89b-12d3-a456-426614174000","flowId":"507f1f77bcf86cd799439011","isPublic":false,"name":"main-flow","promptIds":["507f1f77bcf86cd799439012","507f1f77bcf86cd799439013"]}},"PromptFlowUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Name","description":"Prompt flow name"},"promptIds":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Promptids","description":"Array of prompt IDs"},"isPublic":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ispublic","description":"Whether the prompt flow is public"}},"type":"object","title":"PromptFlowUpdateRequest","description":"Request model for updating a prompt flow"},"PromptResponse":{"properties":{"promptId":{"type":"string","title":"Promptid","description":"Unique prompt identifier (MongoDB _id)"},"name":{"type":"string","title":"Name","description":"Prompt name"},"version":{"anyOf":[{"type":"string"},{"type":"integer"}],"title":"Version","description":"Prompt version"},"type":{"type":"string","title":"Type","description":"Prompt type"},"status":{"$ref":"#/components/schemas/PromptStatus","description":"Prompt status"},"prompt":{"type":"string","title":"Prompt","description":"The actual prompt text"},"clientId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Clientid","description":"Client ID (None for public prompts)"},"isPublic":{"type":"boolean","title":"Ispublic","description":"Whether the prompt is public"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["promptId","name","version","type","status","prompt","isPublic","_metadata"],"title":"PromptResponse","description":"Response model for prompt data","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","updatedAt":"2024-01-01T00:00:00"},"clientId":"123e4567-e89b-12d3-a456-426614174000","isPublic":false,"name":"main","prompt":"You are a helpful assistant.","promptId":"507f1f77bcf86cd799439011","status":"PUBLISHED","type":"system","version":1}},"PromptStatus":{"type":"string","enum":["PUBLISHED","DRAFT","ARCHIVE"],"title":"PromptStatus","description":"Status enum for prompts"},"PromptUpdateRequest":{"properties":{"version":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"null"}],"title":"Version","description":"Prompt version"},"status":{"anyOf":[{"$ref":"#/components/schemas/PromptStatus"},{"type":"null"}],"description":"Prompt status"},"prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prompt","description":"The actual prompt text"},"isPublic":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ispublic","description":"Whether the prompt is public"},"clientId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Clientid","description":"Client ID (admin only, can be nullified if isPublic is true)"}},"type":"object","title":"PromptUpdateRequest","description":"Request model for updating a prompt"},"RunCreateRequest":{"properties":{"initialWorkingPromptIds":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Initialworkingpromptids","description":"Starting working prompt IDs (will be chained in order)"},"evalPromptId":{"type":"string","minLength":1,"title":"Evalpromptid","description":"Evaluation prompt ID (fixed for all iterations)"},"evalModel":{"type":"string","minLength":1,"title":"Evalmodel","description":"Evaluation model name (fixed for all iterations)"},"metaPromptId":{"type":"string","minLength":1,"title":"Metapromptid","description":"Meta-prompting prompt ID (fixed for all iterations)"},"metaModel":{"type":"string","minLength":1,"title":"Metamodel","description":"Meta-prompting model name (fixed for all iterations)"},"workingModels":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Workingmodels","description":"List of working model names to iterate through"},"maxIterations":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Maxiterations","description":"Maximum iterations per model"},"temperature":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Temperature","description":"Temperature between 0 and 1","default":0.7},"priority":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Priority","description":"Job priority between 1 and 1000","default":100},"requestData":{"additionalProperties":true,"type":"object","title":"Requestdata","description":"Input data to be sent to LLM (e.g., text to translate)"}},"type":"object","required":["initialWorkingPromptIds","evalPromptId","evalModel","metaPromptId","metaModel","workingModels","maxIterations","requestData"],"title":"RunCreateRequest","description":"Request model for creating a new run","example":{"evalModel":"gpt-4o","evalPromptId":"507f1f77bcf86cd799439012","initialWorkingPromptIds":["507f1f77bcf86cd799439011"],"maxIterations":5,"metaModel":"gpt-4o","metaPromptId":"507f1f77bcf86cd799439013","priority":100,"requestData":{"text":"Bonjour mon ami"},"temperature":0.7,"workingModels":["gpt-4o","claude-3.5-sonnet"]}},"RunResponse":{"properties":{"runId":{"type":"string","title":"Runid","description":"Unique run identifier (MongoDB _id)"},"clientId":{"type":"string","title":"Clientid","description":"Client ID that owns the run"},"status":{"$ref":"#/components/schemas/RunStatus","description":"Run status"},"initialWorkingPromptIds":{"items":{"type":"string"},"type":"array","title":"Initialworkingpromptids","description":"Initial working prompt IDs"},"evalPromptId":{"type":"string","title":"Evalpromptid","description":"Evaluation prompt ID"},"evalModel":{"type":"string","title":"Evalmodel","description":"Evaluation model name"},"metaPromptId":{"type":"string","title":"Metapromptid","description":"Meta-prompting prompt ID"},"metaModel":{"type":"string","title":"Metamodel","description":"Meta-prompting model name"},"workingModels":{"items":{"type":"string"},"type":"array","title":"Workingmodels","description":"List of working model names"},"maxIterations":{"type":"integer","title":"Maxiterations","description":"Maximum iterations per model"},"temperature":{"type":"number","title":"Temperature","description":"Temperature"},"priority":{"type":"integer","title":"Priority","description":"Priority"},"requestData":{"additionalProperties":true,"type":"object","title":"Requestdata","description":"Input data for working prompts"},"currentModelIndex":{"type":"integer","title":"Currentmodelindex","description":"Index of current model being processed","default":0},"currentIteration":{"type":"integer","title":"Currentiteration","description":"Current iteration number","default":0},"currentJobId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currentjobid","description":"Current job ID being processed"},"failureReason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Failurereason","description":"Reason for failure if status is FAILED"},"modelRuns":{"items":{"$ref":"#/components/schemas/ModelRun"},"type":"array","title":"Modelruns","description":"Results for each model"},"processingMetrics":{"anyOf":[{"$ref":"#/components/schemas/ProcessingMetrics"},{"type":"null"}],"description":"Aggregated processing metrics for entire run"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, etc."}},"type":"object","required":["runId","clientId","status","initialWorkingPromptIds","evalPromptId","evalModel","metaPromptId","metaModel","workingModels","maxIterations","temperature","priority","requestData","_metadata"],"title":"RunResponse","description":"Response model for run data","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","isDeleted":false,"updatedAt":"2024-01-01T00:00:00"},"clientId":"123e4567-e89b-12d3-a456-426614174000","currentIteration":0,"currentJobId":"507f1f77bcf86cd799439015","currentModelIndex":0,"evalModel":"gpt-4o","evalPromptId":"507f1f77bcf86cd799439013","initialWorkingPromptIds":["507f1f77bcf86cd799439012"],"maxIterations":5,"metaModel":"gpt-4o","metaPromptId":"507f1f77bcf86cd799439014","modelRuns":[{"iterations":[],"model":"gpt-4o"}],"priority":100,"requestData":{"text":"Bonjour mon ami"},"runId":"507f1f77bcf86cd799439011","status":"RUNNING","temperature":0.7,"workingModels":["gpt-4o","claude-3.5-sonnet"]}},"RunStatus":{"type":"string","enum":["PENDING","RUNNING","PAUSED","COMPLETED","FAILED","CANCELLED"],"title":"RunStatus","description":"Status enum for runs"},"StreamCreateRequest":{"properties":{"userPrompt":{"type":"string","minLength":1,"title":"Userprompt","description":"Raw text user prompt"},"additionalPrompts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Additionalprompts","description":"Optional list of prompt IDs to validate and include"},"model":{"type":"string","minLength":1,"title":"Model","description":"Model name to use for inference"},"temperature":{"type":"number","maximum":2.0,"minimum":0.0,"title":"Temperature","description":"Sampling temperature","default":0.7}},"type":"object","required":["userPrompt","model"],"title":"StreamCreateRequest","description":"Request model for creating a stream"},"StreamResponse":{"properties":{"streamId":{"type":"string","title":"Streamid","description":"MongoDB document ID"},"clientId":{"type":"string","title":"Clientid","description":"Client ID that created the stream"},"model":{"type":"string","title":"Model","description":"Model used for the stream"},"temperature":{"type":"number","title":"Temperature","description":"Temperature used"},"status":{"type":"string","title":"Status","description":"Stream status (completed, error)"},"processingMetrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Processingmetrics","description":"Processing metrics including tokens, duration, and costs (only present after streaming completes)"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata with timestamps"}},"type":"object","required":["streamId","clientId","model","temperature","status","_metadata"],"title":"StreamResponse","description":"Response model for stream metadata (returned after streaming completes)","example":{"_metadata":{"completedAt":"2024-01-01T00:00:05","createdAt":"2024-01-01T00:00:00"},"clientId":"d486037e-d1d7-4213-980e-0f47d8677ad2","model":"gptest","processingMetrics":{"currency":"USD","duration":1.45,"inputCost":0.0001,"inputTokens":10,"llmDuration":1.23,"outputCost":0.0005,"outputTokens":50,"overheadDuration":0.22,"totalCost":0.0006,"totalDuration":1.45,"totalTokens":60},"status":"completed","streamId":"68d39fe8aac434df5f140c57","temperature":0.7}},"StreamSummaryResponse":{"properties":{"streaming":{"type":"integer","title":"Streaming","description":"Count of streams with streaming status","default":0},"completed":{"type":"integer","title":"Completed","description":"Count of streams with completed status","default":0},"error":{"type":"integer","title":"Error","description":"Count of streams with error status","default":0},"total":{"type":"integer","title":"Total","description":"Total count of streams matching filters","default":0},"processingMetrics":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Processingmetrics","description":"Aggregated processing metrics from completed streams. Includes inputTokens, outputTokens, totalTokens, duration, and optionally inputCost, outputCost, totalCost, currency (only if all currencies match)"}},"type":"object","title":"StreamSummaryResponse","description":"Response model for stream summary with counts by status","example":{"completed":15,"error":1,"processingMetrics":{"currency":"USD","duration":48.3,"inputCost":0.015,"inputTokens":1500,"llmDuration":45.5,"outputCost":0.008,"outputTokens":800,"overheadDuration":2.8,"totalCost":0.023,"totalDuration":48.3,"totalTokens":2300},"streaming":2,"total":18}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WorkerBatchCreateRequest":{"properties":{"workerIdPrefix":{"type":"string","maxLength":90,"minLength":1,"title":"Workeridprefix","description":"Prefix for worker identifiers. Workers will be named {prefix}-1, {prefix}-2, etc."},"count":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Count","description":"Number of workers to create"},"config":{"$ref":"#/components/schemas/WorkerConfig","description":"Worker configuration (shared by all workers)"},"group":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Group","description":"Optional group name for batch operations"}},"type":"object","required":["workerIdPrefix","count","config"],"title":"WorkerBatchCreateRequest","description":"Request model for batch creating workers","example":{"config":{"maxItemsPerBatch":50,"modelFilter":"o3-mini","pollInterval":10},"count":5,"group":"blue","workerIdPrefix":"worker-group-a"}},"WorkerBatchCreateResponse":{"properties":{"created":{"items":{"$ref":"#/components/schemas/WorkerResponse"},"type":"array","title":"Created","description":"List of successfully created workers"},"failed":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Failed","description":"List of failed creations with error details"},"total_requested":{"type":"integer","title":"Total Requested","description":"Total number of workers requested"},"total_created":{"type":"integer","title":"Total Created","description":"Number of workers successfully created"}},"type":"object","required":["created","total_requested","total_created"],"title":"WorkerBatchCreateResponse","description":"Response model for batch worker creation","example":{"created":[],"failed":[],"total_created":5,"total_requested":5}},"WorkerBatchUpdateRequest":{"properties":{"action":{"$ref":"#/components/schemas/BatchAction","description":"Action to perform on the workers"},"workerIds":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Workerids","description":"List of worker IDs to update. Either workerIds or group must be provided."},"group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group","description":"Group name to select workers. Either workerIds or group must be provided."}},"type":"object","required":["action"],"title":"WorkerBatchUpdateRequest","description":"Request model for batch updating workers (start/stop)","example":{"action":"start","group":"blue"}},"WorkerBatchUpdateResponse":{"properties":{"updated":{"items":{"$ref":"#/components/schemas/WorkerResponse"},"type":"array","title":"Updated","description":"List of successfully updated workers"},"failed":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Failed","description":"List of failed updates with error details"},"action":{"$ref":"#/components/schemas/BatchAction","description":"Action that was performed"},"total_requested":{"type":"integer","title":"Total Requested","description":"Total number of workers targeted"},"total_updated":{"type":"integer","title":"Total Updated","description":"Number of workers successfully updated"}},"type":"object","required":["updated","action","total_requested","total_updated"],"title":"WorkerBatchUpdateResponse","description":"Response model for batch worker update (start/stop)","example":{"action":"start","failed":[],"total_requested":5,"total_updated":5,"updated":[]}},"WorkerConfig":{"properties":{"pollInterval":{"type":"integer","maximum":3600.0,"minimum":1.0,"title":"Pollinterval","description":"Polling interval in seconds"},"maxItemsPerBatch":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Maxitemsperbatch","description":"Maximum items to process per batch"},"modelFilter":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Modelfilter","description":"Optional filter for model name (e.g., 'o3-mini')"},"operationFilter":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Operationfilter","description":"Optional filter for operation type (e.g., 'process')"},"clientReferenceFilters":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Clientreferencefilters","description":"Optional filters for clientReference fields (exact match)"}},"type":"object","required":["pollInterval","maxItemsPerBatch"],"title":"WorkerConfig","description":"Configuration for a worker"},"WorkerCreateRequest":{"properties":{"workerId":{"type":"string","maxLength":100,"minLength":1,"title":"Workerid","description":"Unique worker identifier"},"config":{"$ref":"#/components/schemas/WorkerConfig","description":"Worker configuration"},"group":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Group","description":"Optional group name for batch operations"}},"type":"object","required":["workerId","config"],"title":"WorkerCreateRequest","description":"Request model for creating a new worker"},"WorkerResponse":{"properties":{"workerId":{"type":"string","title":"Workerid","description":"Unique worker identifier (MongoDB _id)"},"clientId":{"type":"string","title":"Clientid","description":"Client ID that owns the worker"},"status":{"$ref":"#/components/schemas/WorkerStatus","description":"Worker status"},"config":{"$ref":"#/components/schemas/WorkerConfig","description":"Worker configuration"},"group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group","description":"Optional group name for batch operations"},"threadInfo":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Threadinfo","description":"Thread information (if running)"},"_metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Metadata object with createdAt, updatedAt, and other relevant metadata"}},"type":"object","required":["workerId","clientId","status","config","_metadata"],"title":"WorkerResponse","description":"Response model for worker data","example":{"_metadata":{"createdAt":"2024-01-01T00:00:00","updatedAt":"2024-01-01T00:00:00"},"clientId":"123e4567-e89b-12d3-a456-426614174000","config":{"clientReferenceFilters":{"randomProp":"X"},"maxItemsPerBatch":50,"modelFilter":"o3-mini","operationFilter":"process","pollInterval":10},"group":"blue","status":"stopped","workerId":"507f1f77bcf86cd799439011"}},"WorkerStatus":{"type":"string","enum":["stopped","running","error"],"title":"WorkerStatus","description":"Status enum for workers"},"WorkerSummaryResponse":{"properties":{"running":{"type":"integer","title":"Running","description":"Count of workers with RUNNING status","default":0},"stopped":{"type":"integer","title":"Stopped","description":"Count of workers with STOPPED status","default":0},"error":{"type":"integer","title":"Error","description":"Count of workers with ERROR status","default":0},"total":{"type":"integer","title":"Total","description":"Total count of workers matching filters","default":0},"running_ids":{"items":{"type":"string"},"type":"array","title":"Running Ids","description":"List of worker IDs with RUNNING status"},"stopped_ids":{"items":{"type":"string"},"type":"array","title":"Stopped Ids","description":"List of worker IDs with STOPPED status"},"error_ids":{"items":{"type":"string"},"type":"array","title":"Error Ids","description":"List of worker IDs with ERROR status"}},"type":"object","title":"WorkerSummaryResponse","description":"Response model for worker summary with counts and IDs by status","example":{"error":1,"error_ids":["507f1f77bcf86cd799439016"],"running":2,"running_ids":["507f1f77bcf86cd799439011","507f1f77bcf86cd799439012"],"stopped":3,"stopped_ids":["507f1f77bcf86cd799439013","507f1f77bcf86cd799439014","507f1f77bcf86cd799439015"],"total":6}},"WorkerUpdateRequest":{"properties":{"config":{"anyOf":[{"$ref":"#/components/schemas/WorkerConfig"},{"type":"null"}],"description":"Updated worker configuration"}},"type":"object","title":"WorkerUpdateRequest","description":"Request model for updating worker configuration"}},"securitySchemes":{"HTTPBasic":{"type":"http","scheme":"basic"}}}}