meta {
  name: Error Invalid SDK
  type: http
  seq: 8
}

post {
  url: {{baseUrl}}/models
  body: json
  auth: none
}

headers {
  Content-Type: application/json
  admin_api_key: {{adminApiKey}}
}

body:json {
  {
    "name": "test-model-invalid-sdk",
    "sdk": "InvalidSDK",
    "endpoint": "https://example.com",
    "apiType": "foundry",
    "apiVersion": "2024-05-01-preview",
    "deployment": "test-deployment",
    "service": "test-service",
    "key": "TEST-KEY",
    "maxToken": 1000,
    "minTemperature": 0,
    "maxTemperature": 1,
    "cost": {
      "tokens": 1000,
      "currency": "USD",
      "input": 0.0002,
      "output": 0.0004
    }
  }
}

tests {
  test("Status code is 422", function() {
    expect(res.getStatus()).to.equal(422);
  });
  
  test("Response contains validation error", function() {
    const body = res.getBody();
    expect(body).to.have.property('detail');
  
    const found = body.detail.some(d => d.msg && d.msg.includes('SDK'));
    expect(found).to.be.true;
  });
}
